noux_build.patch

From: Christian Prochaska <christian.prochaska@genode-labs.com>


---
 gdb/configure             |   10 +++++-----
 sim/common/Make-common.in |    2 +-
 2 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/gdb/configure b/gdb/configure
index e8979f0..5adc702 100755
--- a/gdb/configure
+++ b/gdb/configure
@@ -5641,11 +5641,11 @@ fi
 # configuration.
 gdb_host_obs=posix-hdep.o
 
-if test "${target}" = "${host}"; then
-  gdb_native=yes
-else
+#if test "${target}" = "${host}"; then
+#  gdb_native=yes
+#else
   gdb_native=no
-fi
+#fi
 
 . $srcdir/configure.host
 
@@ -11910,7 +11910,7 @@ sigjmp_buf env; while (! sigsetjmp (env, 1)) siglongjmp (env, 1);
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"; then :
   gdb_cv_func_sigsetjmp=yes
 else
   gdb_cv_func_sigsetjmp=no
diff --git a/sim/common/Make-common.in b/sim/common/Make-common.in
index 2f5ad89..016cb49 100644
--- a/sim/common/Make-common.in
+++ b/sim/common/Make-common.in
@@ -253,7 +253,7 @@ CSEARCH = -I. -I$(srcdir) -I../common -I$(srccom) \
   -I../../bfd -I$(srcroot)/bfd \
   -I../../opcodes -I$(srcroot)/opcodes \
   @INCINTL@
-ALL_CFLAGS = $(CONFIG_CFLAGS) $(CSEARCH) $(CFLAGS)
+ALL_CFLAGS = $(CONFIG_CFLAGS) $(CSEARCH) $(CPPFLAGS) $(CFLAGS)
 BUILD_CFLAGS = -g -O $(CSEARCH)
 
 COMMON_DEP_CFLAGS = $(CONFIG_CFLAGS) $(CSEARCH)

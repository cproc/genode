qtbase_fixes.patch

From: Christian Prochaska <christian.prochaska@genode-labs.com>


---
 qtbase/src/widgets/kernel/qwidgetwindow.cpp    |    3 +++
 qtbase/src/widgets/widgets/qwidgetanimator.cpp |    3 ++-
 2 files changed, 5 insertions(+), 1 deletion(-)

diff --git a/qtbase/src/widgets/kernel/qwidgetwindow.cpp b/qtbase/src/widgets/kernel/qwidgetwindow.cpp
index 34b12a74b2..9f35a1464c 100644
--- a/qtbase/src/widgets/kernel/qwidgetwindow.cpp
+++ b/qtbase/src/widgets/kernel/qwidgetwindow.cpp
@@ -366,6 +366,9 @@ bool QWidgetWindow::event(QEvent *event)
         m_widget->repaint();
         return true;
 
+    case QEvent::MetaCall:
+    	return QWindow::event(event);
+
     default:
         break;
     }
diff --git a/qtbase/src/widgets/widgets/qwidgetanimator.cpp b/qtbase/src/widgets/widgets/qwidgetanimator.cpp
index b6828a14ef..64995b762b 100644
--- a/qtbase/src/widgets/widgets/qwidgetanimator.cpp
+++ b/qtbase/src/widgets/widgets/qwidgetanimator.cpp
@@ -75,7 +75,8 @@ void QWidgetAnimator::abort(QWidget *w)
 void QWidgetAnimator::animationFinished()
 {
     QPropertyAnimation *anim = qobject_cast<QPropertyAnimation*>(sender());
-    abort(static_cast<QWidget*>(anim->targetObject()));
+    if (anim)
+    	abort(static_cast<QWidget*>(anim->targetObject()));
 }
 #endif //QT_NO_ANIMATION
 

qt5_qpa.patch

From: Christian Prochaska <christian.prochaska@genode-labs.com>


---
 .../fontdatabases/basic/qbasicfontdatabase.cpp     |    9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/qtbase/src/platformsupport/fontdatabases/basic/qbasicfontdatabase.cpp b/qtbase/src/platformsupport/fontdatabases/basic/qbasicfontdatabase.cpp
index a745162..3a6490f 100644
--- a/qtbase/src/platformsupport/fontdatabases/basic/qbasicfontdatabase.cpp
+++ b/qtbase/src/platformsupport/fontdatabases/basic/qbasicfontdatabase.cpp
@@ -238,7 +238,16 @@ void QBasicFontDatabase::populateFontDatabase()
     for (int i = 0; i < int(dir.count()); ++i) {
         const QByteArray file = QFile::encodeName(dir.absoluteFilePath(dir[i]));
 //        qDebug() << "looking at" << file;
+#ifdef Q_OS_GENODE
+        QByteArray data;
+        QFile f(file);
+        if (!f.open(QIODevice::ReadOnly))
+            continue;
+        data = f.readAll();
+        addTTFile(data, file);
+#else
         addTTFile(QByteArray(), file);
+#endif
     }
 }
 
